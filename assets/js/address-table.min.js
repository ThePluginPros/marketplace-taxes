!function(s,e,t){s(function(){var a=s("#nexus_addresses"),d=e.template("vt-nexus-addresses-empty"),n=e.template("vt-nexus-address"),i=e.template("vt-nexus-address-default");new(Backbone.View.extend({initialize:function(){s(document.body).on("click",".vt-add-nexus-address",{view:this},this.onAddNewRow),s(document.body).on("click",".vt-remove-nexus-address",{view:this},this.onDeleteRow)},render:function(){var e=t.addresses,n=this;n.$el.empty(),_.size(e)?s.each(e,function(e,t){t.id=e,n.renderRow(t)}):n.$el.append(d)},renderRow:function(e){var t;t=e.default?i(e):n(e),this.$el.append(t),this.initRow(e)},initRow:function(e){var t=this.$el,n=t.closest("table"),a=t.find('tr[data-id="'+e.id+'"]'),d=n.find("tr:first th"),i=e.country;""!==i?a.find('.mt_country_to_state option[value="'+i+'"]').prop("selected",!0):a.find(".mt_country_to_state").change(),a.find("td").each(function(){var e=d.eq(s(this).index());if(e.attr("data-label"))var t=e.data("label");else t=e.text();t.trim()&&s(this).attr("data-label",t+":")})},onAddNewRow:function(e){var t=e.data.view;e.preventDefault(),s("#nexus_addresses_blank_row").is(":visible")&&t.$el.empty();var n=t.$el.find("tr:last-child"),a=0;n.length&&(a=parseInt(n.data("id"))+1),t.renderRow({id:a,address_1:"",country:"",city:"",state:"",postcode:""})},onDeleteRow:function(e){var t=e.data.view,n=s(this).closest("tr");e.preventDefault(),n.remove(),0===a.find("tr").length&&t.$el.append(d)}}))({el:a}).render()}),s(window).load(function(){s(".mt_country_to_state").each(function(){s(this).trigger("change")})})}(jQuery,wp,wcv_tax_address_table_localize);