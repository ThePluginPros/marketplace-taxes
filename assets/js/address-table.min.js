!function(d,t,i,r){d(function(){d("#wcv_taxes_nexus_addresses_table");var a=d("#wcv_taxes_nexus_addresses"),o=t.template("vt-nexus-addresses-empty"),e=t.template("vt-nexus-address");new(Backbone.View.extend({rowTemplate:e,initialize:function(){d(document.body).on("click",".vt-add-nexus-address",{view:this},this.onAddNewRow),d(document.body).on("click",".vt-remove-nexus-address",{view:this},this.onDeleteRow)},render:function(){var e=i.addresses,n=this;n.$el.empty(),_.size(e)?d.each(e,function(e,t){t.id=e,n.renderRow(t)}):n.$el.append(o)},renderRow:function(e){var t=this,n=t.rowTemplate(e);t.$el.append(n),t.initRow(e)},initRow:function(e){var t=this.$el.find('tr[data-id="'+e.id+'"]'),n=e.country;""!==n&&t.find('.country_select option[value="'+n+'"]').prop("selected",!0),d(document.body).trigger("country_to_state_changed")},onAddNewRow:function(e){var t=e.data.view;e.preventDefault(),d("#wcv_taxes_nexus_addresses_blank_row").is(":visible")&&t.$el.empty();var n=t.$el.find("tr").length;t.renderRow({id:n,address_1:"",address_2:"",country:"",city:"",state:"",postcode:""})},onDeleteRow:function(e){var t=e.data.view,n=d(this).closest("tr");e.preventDefault(),n.remove(),0===a.find("tr").length&&t.$el.append(o)}}))({el:a}).render(),d(window).load(function(){var e=r.Common_1.getInstance(".wcv-form")[0];if(void 0!==e){var d=e._options.beforeValidation;e._options.beforeValidation=function(arguments){var e="locations_placeholder",t=arguments.validator,n=t._formElements,o=a.find("tr:not(#wcv_taxes_nexus_addresses_blank_row)").length;e in arguments.elements?(n[e][0].unforceInvalid(),n[e][0].unforceValid()):n[e]=[new r.FormValidator_2.FormElement(document.getElementById(e),{form:t})],o<1?n[e][0].forceInvalid(i.strings.locations_error):n[e][0].forceValid(),"function"==typeof d&&d(arguments)}}})}),d(window).load(function(){d(document.body).trigger("country_to_state_changed"),d(".country_select").each(function(){d(this).trigger("change")})})}(jQuery,wp,wcv_tax_address_table_localize,Ink.UI);