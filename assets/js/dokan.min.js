jQuery(function(s){var e={init:function(){s("form#tax-form").validate({submitHandler:function(a){e.submit(a.getAttribute("id"))},errorElement:"span",errorClass:"error",errorPlacement:this.validate_error,rules:{taxjar_api_token:{required:{depends:function(a){return s("#upload_transactions").is(":checked")}}}},messages:{taxjar_api_token:{required:mt_settings_data.i18n_api_key_required}}}),s(document).ajaxSuccess(this.check_setup_status),s(window).on("hashchange",this.handle_hash_change).load(function(){s(this).trigger("hashchange")})},validate_error:function(a,e){s(e).closest("div").append(a)},submit:function(a){"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();var t=s("form#"+a),e=t.serialize()+"&action=dokan_settings&form_id="+a;t.find(".ajax_prev").append('<span class="dokan-loading"> </span>'),s.post(dokan.ajaxurl,e,function(a){t.find("span.dokan-loading").remove(),s("html,body").animate({scrollTop:100});var e=s(".dokan-ajax-response");a.success?(e.html(s("<div/>",{class:"dokan-alert dokan-alert-success",html:"<p>"+a.data.msg+"</p>"})),e.append(a.data.progress)):e.html(s("<div/>",{class:"dokan-alert dokan-alert-danger",html:a.data}))})},check_setup_status:function(a,e,t,n){void 0!==n.data&&void 0!==n.data.tax_setup_complete&&(n.data.tax_setup_complete?s("#address_notice").hide():location.reload())},handle_hash_change:function(){"#address"===location.hash&&(s("html, body").animate({scrollTop:s("#dokan_store_ppp").offset().top},500),location.hash="")}};e.init()});